(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9119:function(e,t,s){Promise.resolve().then(s.bind(s,7793))},7793:function(e,t,s){"use strict";s.r(t);var a=s(7437),o=s(2265),n=s(9050),r=s(1975),i=s(8874),l=s(9227),c=s(3226),u=s(8938),d=s(1865),p=s(75),h=s(4033),m=s(780);t.default=()=>{let e=(0,h.useRouter)();o.useEffect(()=>{p.t.persist.rehydrate()},[]);let{login:t,isLoggedIn:s}=(0,p.t)(),[v,f]=o.useState(""),{register:g,handleSubmit:x,formState:{errors:y}}=(0,d.cI)(),j=async e=>{let s=await t(e.username,e.password);s?f(s):f("Invalid email or password")};return o.useEffect(()=>{s&&e.push("/")},[s]),(0,a.jsx)("div",{className:" h-screen",children:(0,a.jsxs)(u.Z,{component:"main",maxWidth:"xs",children:[(0,a.jsxs)(l.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,a.jsx)(c.Z,{component:"h1",variant:"h5",children:"Login"}),(0,a.jsxs)(l.Z,{component:"form",onSubmit:x(j),noValidate:!0,sx:{mt:3},children:[(0,a.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,a.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,a.jsx)(r.Z,{required:!0,fullWidth:!0,id:"username",label:"email",...g("username"),autoComplete:"username"}),y.username&&(0,a.jsx)("span",{className:"text-red-500",children:"This field is required"})]}),(0,a.jsxs)(i.ZP,{item:!0,xs:12,children:[(0,a.jsx)(r.Z,{required:!0,fullWidth:!0,...g("password"),label:"Password",type:"password",id:"password",autoComplete:"new-password"}),y.password&&(0,a.jsx)("span",{className:"text-red-500",children:"This field is required"})]})]}),(0,a.jsx)(n.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},className:"bg-blue-500",children:"Login"})]})]}),""!=v&&(0,a.jsx)(m.Z,{openStatus:!0,message:v})]})})}},780:function(e,t,s){"use strict";var a=s(7437),o=s(7292),n=s(2653),r=s(3533),i=s(2265);t.Z=e=>{let{openStatus:t,message:s}=e,[l,c]=(0,i.useState)(t),u=(e,t)=>{"clickaway"!==t&&c(!1)},d=(0,a.jsx)(i.Fragment,{children:(0,a.jsx)(n.Z,{size:"small","aria-label":"close",color:"inherit",onClick:u,children:(0,a.jsx)(r.Z,{fontSize:"small"})})});return(0,a.jsx)("div",{children:(0,a.jsx)(o.Z,{open:l,autoHideDuration:6e3,onClose:u,message:s,action:d})})}},75:function(e,t,s){"use strict";s.d(t,{t:function(){return u}});var a=s(4660),o=s(4810),n=s(9222);let r=e=>({candidates:[],getCandidates:async()=>{try{let t=await n.Z.get("http://54.89.73.83:5000/api/v1/candidates/election/1");e({candidates:t.data})}catch(e){console.error(e)}}}),i=e=>({currentUser:null,isLoggedIn:!1,role:null,login:async(t,s)=>{try{let a=await fetch("http://54.89.73.83:5000/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:s})});if(!a.ok)return"Invalid email or password";{let t=await a.json();return e({isLoggedIn:!0}),e({currentUser:t}),e({role:t.role}),"Inicio de sessi\xf3n exitoso"}}catch(e){console.error(e)}},logout:()=>(e({isLoggedIn:!1}),e({currentUser:null}),e({role:null}),"Goodbye")}),l=e=>({juntasReceptoras:[],junta:null,getTodasJuntas:async()=>{try{let t=await n.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/");e({juntasReceptoras:t.data})}catch(e){console.error(e)}},getJunta:async t=>{try{let s=await n.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/".concat(t));e({junta:s.data})}catch(e){console.error(e)}}}),c=e=>({votesPerProvince:null,votersTotal:null,votesTotal:null,votesInfo:null,postActa:async e=>{try{let t=await fetch("http://54.89.73.83:5000/api/v1/votes/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)return await t.json(),!0}catch(e){console.error(e)}},getVotesPerProvince:async t=>{console.log(t);let s="http://54.89.73.83:5000/api/v1/votes/?province=".concat(t.province,"&only_quick_count=").concat(t.quick_count);"Ecuador"===t.province&&(s="http://54.89.73.83:5000/api/v1/votes/?only_quick_count=".concat(t.quick_count));try{let t=await n.Z.get(s,{headers:{"Content-Type":"application/json"}});if(200===t.status){let s=await t.data;e({votesPerProvince:s.candidates_result}),e({votersTotal:s.voters_total}),e({votesTotal:s.votes_total}),e({votesInfo:s.votes_info}),console.log(await s),console.log(await s.votes_info)}else throw Error("Invalid email or password")}catch(e){console.error(e)}}}),u=(0,a.Ue)((0,o.tJ)(function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return{...i(...t),...r(...t),...l(...t),...c(...t)}},{name:"voting-system-store",storage:(0,o.FL)(()=>localStorage),skipHydration:!0}))},4033:function(e,t,s){e.exports=s(290)}},function(e){e.O(0,[973,410,872,971,864,744],function(){return e(e.s=9119)}),_N_E=e.O()}]);