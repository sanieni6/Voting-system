(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[517],{5998:function(e,t,a){Promise.resolve().then(a.bind(a,1087))},1087:function(e,t,a){"use strict";a.r(t);var s=a(7437),n=a(2265),l=a(9050),o=a(1975),r=a(8874),c=a(9227),i=a(3226),u=a(8938),d=a(819),h=a(7739),m=a(4081),p=a(8653),x=a(1865),v=a(75),j=a(780),f=a(7),g=a(4647),Z=a(2582);t.default=()=>{let[e,t]=(0,n.useState)(""),[a,b]=(0,n.useState)(""),[y,N]=(0,n.useState)(""),[S,I]=(0,n.useState)(""),[P,_]=(0,n.useState)(""),[q,C]=(0,n.useState)(""),[E,w]=(0,n.useState)(0),[T,k]=(0,n.useState)([]),[B,O]=(0,n.useState)([]),[W,A]=(0,n.useState)([]),[z,V]=(0,n.useState)([]),[L,F]=(0,n.useState)([]),[J,D]=(0,n.useState)([]),[R,U]=(0,n.useState)(0),[H,G]=(0,n.useState)(0),[K,M]=(0,n.useState)(0),[Q,X]=(0,n.useState)(0),[Y,$]=n.useState(""),[ee,et]=(0,n.useState)(!1),[ea,es]=(0,n.useState)(!1);(0,n.useEffect)(()=>{em()},[e]),(0,n.useEffect)(()=>{ep()},[e,P]),(0,n.useEffect)(()=>{ex()},[e,P,a]),(0,n.useEffect)(()=>{ev()},[e]),(0,n.useEffect)(()=>{ef()},[e,P,a]);let{register:en,handleSubmit:el,formState:{errors:eo}}=(0,x.cI)();(0,n.useEffect)(()=>{v.t.persist.rehydrate()},[]);let{isLoggedIn:er,getCandidates:ec,candidates:ei,getTodasJuntas:eu,juntasReceptoras:ed,postActa:eh}=(0,v.t)();(0,n.useEffect)(()=>{eu(),ec()},[]),(0,n.useEffect)(()=>{ej()},[a]);let em=()=>{console.log(ed),console.log(e);let t=[];ed.forEach(a=>{a.province==e&&(t.push(a.city),console.log(a.city))}),O(t)},ep=()=>{console.log(ed),console.log(e),console.log(P);let t=[];ed.forEach(a=>{a.province==e&&a.city==P&&(t.push(a.parish),console.log(a.parish))}),A(t)},ex=()=>{let t=[];ed.forEach(s=>{s.province==e&&s.city==P&&s.parish==a&&t.push(s.id)}),D(t)},ev=()=>{let t=[];ed.forEach(a=>{a.province==e&&t.push(a.district)}),V(t)},ej=()=>{ed.forEach(t=>{t.province==e&&t.city==P&&t.parish==a&&w(t.id)})},ef=()=>{let t=[];ed.forEach(s=>{s.province==e&&s.city==P&&s.parish==a&&t.push(s.zone)}),F(t)},eg=()=>{let e=document.querySelectorAll("input"),t=document.getElementById("parroquia"),a=document.getElementById("canton"),s=document.getElementById("junta"),n=document.getElementById("circunscripcion"),l=document.getElementById("zona"),o=document.getElementById("provincia");t.value="",a.value="",s.value="",n.value="",l.value="",o.value="",e.forEach(e=>{e.value=""})};return(0,s.jsx)("div",{className:" h-full",children:(0,s.jsxs)(u.Z,{component:"main",maxWidth:"xs",children:[(0,s.jsxs)(c.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,s.jsx)(i.Z,{component:"h1",variant:"h5",children:"Acta"}),(0,s.jsxs)(c.Z,{component:"form",onSubmit:el(e=>{$("");let t=0,a=[];for(let[s,n]of Object.entries(e))if(s.includes("numberVotes")){let e=s.split("+")[0],l={candidate_id:parseInt(e),number_of_votes:parseInt(n)};a.push(l),t+=parseInt(n),console.log(Q)}let s={central_electoral:E,election:1,number_of_absentees:e.totalSufragantes,blank_votes:e.votosBlancos,null_votes:e.votosNulos,vote_candidate:a,is_quick_count:ee,has_inconsistencies:ea};if(e.central_electoral=E,console.log(t+parseInt(e.votosBlancos)+parseInt(e.votosNulos)),parseInt(e.totalSufragantes)>350&&alert("El total de sufragantes no puede ser mayor a 350"),t+parseInt(e.votosBlancos)+parseInt(e.votosNulos)===parseInt(e.totalSufragantes)){let e=eh(s);e?alert("Acta registrada"):$(""),eg()}else alert("Los votos no coinciden con el total de sufragantes o el total de sufragantes es mayor a 350");return!0}),noValidate:!0,sx:{mt:3},children:[(0,s.jsxs)(r.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(m.Z,{fullWidth:!0,className:"w-[140px]",children:[(0,s.jsx)(d.Z,{id:"provincia-select-label",children:"Provincia"}),(0,s.jsx)(p.Z,{labelId:"provincia",id:"provincia",value:e,label:"provincia",...en("provincia",{required:!0}),onChange:e=>{t(e.target.value)},children:ed.map(e=>(0,s.jsxs)(h.Z,{value:e.province,children:[e.province," "]},e.id))}),eo.provincia&&(0,s.jsx)("span",{className:"text-red-500",children:"This field is required"})]})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(m.Z,{fullWidth:!0,className:"w-[140px]",children:[(0,s.jsx)(d.Z,{id:"parroquia-select-label",children:"Parroquia"}),(0,s.jsx)(p.Z,{labelId:"parroquia-select-label",id:"parroquia",value:a,label:"parroquia",...en("parroquia"),onChange:e=>{b(e.target.value)},children:W.map((e,t)=>(0,s.jsxs)(h.Z,{value:e,children:[e," "]},t))})]})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(m.Z,{fullWidth:!0,className:"w-[140px]",children:[(0,s.jsx)(d.Z,{id:"provincia-select-label",children:"Circunscripci\xf3n"}),(0,s.jsx)(p.Z,{labelId:"circunscripcion",id:"circunscripcion",value:y,label:"circunscripcion",...en("circunscripcion"),onChange:e=>{N(e.target.value)},children:z.map((e,t)=>(0,s.jsxs)(h.Z,{value:e,children:[e," "]},t))}),eo.circunscripcion&&(0,s.jsx)("span",{className:"text-red-500",children:"This field is required"})]})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(m.Z,{fullWidth:!0,className:"w-[140px]",children:[(0,s.jsx)(d.Z,{id:"provincia-select-label",children:"Zona"}),(0,s.jsx)(p.Z,{labelId:"zona",id:"zona",value:S,label:"zona",...en("zona"),onChange:e=>{I(e.target.value)},children:L.map((e,t)=>(0,s.jsxs)(h.Z,{value:e,children:[e," "]},t))}),eo.zona&&(0,s.jsx)("span",{className:"text-red-500",children:"This field is required"})]})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(m.Z,{fullWidth:!0,className:"w-[140px]",children:[(0,s.jsx)(d.Z,{id:"provincia-select-label",children:"Cant\xf3n"}),(0,s.jsx)(p.Z,{labelId:"canton",id:"canton",value:P,label:"canton",...en("canton",{required:!0}),onChange:e=>{_(e.target.value)},children:B.map((e,t)=>(0,s.jsxs)(h.Z,{value:e,children:[e," "]},t))}),eo.canton&&(0,s.jsx)("span",{className:"text-red-500",children:"This field is required"})]})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsxs)(m.Z,{fullWidth:!0,className:"w-[140px]",children:[(0,s.jsx)(d.Z,{id:"provincia-select-label",children:"Junta n\xb0"}),(0,s.jsx)(p.Z,{labelId:"junta",id:"junta",value:q,label:"junta",...en("junta",{required:!0}),onChange:e=>{C(e.target.value)},children:J.map((e,t)=>(0,s.jsxs)(h.Z,{value:e,children:[e," "]},t))}),eo.junta&&(0,s.jsx)("span",{className:"text-red-500",children:"This field is required"})]})})]}),(0,s.jsx)("hr",{className:"mt-4 border"}),(0,s.jsxs)(r.ZP,{container:!0,spacing:2,className:"mt-3",children:[(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,className:"flex items-center",children:(0,s.jsx)(i.Z,{component:"h2",variant:"h5",className:" text-center content-center",children:"Total sufragantes"})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsx)(o.Z,{autoComplete:"given-name",...en("totalSufragantes",{required:!0}),required:!0,fullWidth:!0,id:"totalSufragantes",label:"Total Sufragantes",onChange:e=>U(e.target.value),autoFocus:!0})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,className:"flex items-center",children:(0,s.jsx)(i.Z,{component:"h2",variant:"h5",className:" text-center content-center",children:"Votos Blancos"})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsx)(o.Z,{autoComplete:"given-name",...en("votosBlancos",{required:!0}),required:!0,fullWidth:!0,id:"votosBlancos",label:"Votos Blancos",onChange:e=>G(e.target.value),autoFocus:!0})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,className:"flex items-center",children:(0,s.jsx)(i.Z,{component:"h2",variant:"h5",className:" text-center content-center",children:"Votos Nulos"})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsx)(o.Z,{autoComplete:"given-name",...en("votosNulos",{required:!0}),required:!0,fullWidth:!0,id:"votosNulos",label:"Votos Nulos",onChange:e=>M(e.target.value),autoFocus:!0})})]}),(0,s.jsx)("hr",{className:"my-4 border"}),(0,s.jsx)(i.Z,{component:"h2",variant:"h7",className:" text-center content-center mb-3",children:"VOTACI\xd3N OBTENIDA POR LAS O LOS CANDIDATOS"}),(0,s.jsx)(r.ZP,{container:!0,spacing:2,className:"mt-3",children:ei.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,className:"flex items-center",children:(0,s.jsx)(i.Z,{component:"h2",variant:"h7",className:" text-center content-center",children:e.name})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsx)(o.Z,{autoComplete:"given-name",...en("".concat(e.id,"+numberVotes"),{required:!0}),required:!0,fullWidth:!0,id:e.id,label:"N\xb0 votos"})})]}))}),(0,s.jsxs)(r.ZP,{container:!0,spacing:2,className:"mt-3",children:[(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsx)(Z.Z,{children:(0,s.jsx)(f.Z,{control:(0,s.jsx)(g.Z,{checked:ee,onChange:e=>et(e.target.checked)}),label:"Conteo Rapido"})})}),(0,s.jsx)(r.ZP,{item:!0,xs:12,sm:6,children:(0,s.jsx)(Z.Z,{children:(0,s.jsx)(f.Z,{control:(0,s.jsx)(g.Z,{checked:ea,onChange:e=>es(e.target.checked)}),label:"Inconsistencia"})})})]}),(0,s.jsx)(l.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},className:"bg-blue-500",children:"Submit"})]})]}),""!=Y&&(0,s.jsx)(j.Z,{openStatus:!0,message:Y})]})})}},780:function(e,t,a){"use strict";var s=a(7437),n=a(7292),l=a(2653),o=a(3533),r=a(2265);t.Z=e=>{let{openStatus:t,message:a}=e,[c,i]=(0,r.useState)(t),u=(e,t)=>{"clickaway"!==t&&i(!1)},d=(0,s.jsx)(r.Fragment,{children:(0,s.jsx)(l.Z,{size:"small","aria-label":"close",color:"inherit",onClick:u,children:(0,s.jsx)(o.Z,{fontSize:"small"})})});return(0,s.jsx)("div",{children:(0,s.jsx)(n.Z,{open:c,autoHideDuration:6e3,onClose:u,message:a,action:d})})}},75:function(e,t,a){"use strict";a.d(t,{t:function(){return u}});var s=a(4660),n=a(4810),l=a(9222);let o=e=>({candidates:[],getCandidates:async()=>{try{let t=await l.Z.get("http://54.89.73.83:5000/api/v1/candidates/election/1");e({candidates:t.data})}catch(e){console.error(e)}}}),r=e=>({currentUser:null,isLoggedIn:!1,role:null,login:async(t,a)=>{try{let s=await fetch("http://54.89.73.83:5000/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:a})});if(!s.ok)return"Invalid email or password";{let t=await s.json();return e({isLoggedIn:!0}),e({currentUser:t}),e({role:t.role}),"Inicio de sessi\xf3n exitoso"}}catch(e){console.error(e)}},logout:()=>(e({isLoggedIn:!1}),e({currentUser:null}),e({role:null}),"Goodbye")}),c=e=>({juntasReceptoras:[],junta:null,getTodasJuntas:async()=>{try{let t=await l.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/");e({juntasReceptoras:t.data})}catch(e){console.error(e)}},getJunta:async t=>{try{let a=await l.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/".concat(t));e({junta:a.data})}catch(e){console.error(e)}}}),i=e=>({votesPerProvince:null,votersTotal:null,votesTotal:null,votesInfo:null,postActa:async e=>{try{let t=await fetch("http://54.89.73.83:5000/api/v1/votes/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)return await t.json(),!0}catch(e){console.error(e)}},getVotesPerProvince:async t=>{console.log(t);let a="http://54.89.73.83:5000/api/v1/votes/?province=".concat(t.province,"&only_quick_count=").concat(t.quick_count);"Ecuador"===t.province&&(a="http://54.89.73.83:5000/api/v1/votes/?only_quick_count=".concat(t.quick_count));try{let t=await l.Z.get(a,{headers:{"Content-Type":"application/json"}});if(200===t.status){let a=await t.data;e({votesPerProvince:a.candidates_result}),e({votersTotal:a.voters_total}),e({votesTotal:a.votes_total}),e({votesInfo:a.votes_info}),console.log(await a),console.log(await a.votes_info)}else throw Error("Invalid email or password")}catch(e){console.error(e)}}}),u=(0,s.Ue)((0,n.tJ)(function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return{...r(...t),...o(...t),...c(...t),...i(...t)}},{name:"voting-system-store",storage:(0,n.FL)(()=>localStorage),skipHydration:!0}))}},function(e){e.O(0,[973,410,228,872,971,864,744],function(){return e(e.s=5998)}),_N_E=e.O()}]);