(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7964:function(e,t,r){Promise.resolve().then(r.t.bind(r,3327,23)),Promise.resolve().then(r.t.bind(r,3054,23)),Promise.resolve().then(r.bind(r,2152))},2152:function(e,t,r){"use strict";r.r(t);var o=r(7437),s=r(1396),n=r.n(s),a=r(75),i=r(4033),l=r(2265);t.default=function(){(0,l.useEffect)(()=>{a.t.persist.rehydrate()},[]);let{isLoggedIn:e,logout:t,role:r}=(0,a.t)(),s=(0,i.useRouter)();return(0,l.useEffect)(()=>{e||s.push("/login")},[]),(0,o.jsx)("nav",{className:"bg-zinc-900 text-white py-3 mb-2",children:(0,o.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,o.jsx)(n(),{href:"/",children:(0,o.jsx)("h3",{className:"text-3xl",children:"Voting System"})}),(0,o.jsxs)("ul",{className:"flex gap-3",children:[e&&("admin"===r||"operator"===r)&&(0,o.jsx)("li",{className:"text-white hover:text-sky-400 border-solid border-red-600 border-2 p-3",children:(0,o.jsx)(n(),{href:"/user/[id]/register",as:"/user/1/register",className:"text-white hover:text-sky-400",children:"Registrar Acta"})}),e&&("admin"===r||"operator"===r||"report"===r)&&(0,o.jsx)("li",{className:"text-sky-500 hover:text-sky-400 border-solid border-red-600 border-2 p-3",children:(0,o.jsx)(n(),{href:"/dashboard/presidente",className:"text-white hover:text-sky-400",children:"Presidente/a"})}),!e&&(0,o.jsx)("li",{className:"border-solid border-red-600 border-2 p-3",children:(0,o.jsx)(n(),{href:"/login",className:"text-white hover:text-sky-400 ",children:"Login"})}),e&&(0,o.jsx)("li",{className:"text-sky-500 hover:text-sky-400 border-solid border-red-600 border-2 p-3",children:(0,o.jsx)("button",{onClick:()=>{t(),s.push("/login")},className:"text-white hover:text-sky-400",children:"Cerrar sesi\xf3n"})})]})]})})}},75:function(e,t,r){"use strict";r.d(t,{t:function(){return d}});var o=r(4660),s=r(4810),n=r(9222);let a=e=>({candidates:[],getCandidates:async()=>{try{let t=await n.Z.get("http://54.89.73.83:5000/api/v1/candidates/election/1");e({candidates:t.data})}catch(e){console.error(e)}}}),i=e=>({currentUser:null,isLoggedIn:!1,role:null,login:async(t,r)=>{try{let o=await fetch("http://54.89.73.83:5000/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:r})});if(!o.ok)return"Invalid email or password";{let t=await o.json();return e({isLoggedIn:!0}),e({currentUser:t}),e({role:t.role}),"Inicio de sessi\xf3n exitoso"}}catch(e){console.error(e)}},logout:()=>(e({isLoggedIn:!1}),e({currentUser:null}),e({role:null}),"Goodbye")}),l=e=>({juntasReceptoras:[],junta:null,getTodasJuntas:async()=>{try{let t=await n.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/");e({juntasReceptoras:t.data})}catch(e){console.error(e)}},getJunta:async t=>{try{let r=await n.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/".concat(t));e({junta:r.data})}catch(e){console.error(e)}}}),c=e=>({votesPerProvince:null,votersTotal:null,votesTotal:null,votesInfo:null,postActa:async e=>{try{let t=await fetch("http://54.89.73.83:5000/api/v1/votes/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)return await t.json(),!0}catch(e){console.error(e)}},getVotesPerProvince:async t=>{console.log(t);let r="http://54.89.73.83:5000/api/v1/votes/?province=".concat(t.province,"&only_quick_count=").concat(t.quick_count);"Ecuador"===t.province&&(r="http://54.89.73.83:5000/api/v1/votes/?only_quick_count=".concat(t.quick_count));try{let t=await n.Z.get(r,{headers:{"Content-Type":"application/json"}});if(200===t.status){let r=await t.data;e({votesPerProvince:r.candidates_result}),e({votersTotal:r.voters_total}),e({votesTotal:r.votes_total}),e({votesInfo:r.votes_info}),console.log(await r),console.log(await r.votes_info)}else throw Error("Invalid email or password")}catch(e){console.error(e)}}}),d=(0,o.Ue)((0,s.tJ)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return{...i(...t),...a(...t),...l(...t),...c(...t)}},{name:"voting-system-store",storage:(0,s.FL)(()=>localStorage),skipHydration:!0}))},3054:function(){}},function(e){e.O(0,[973,262,971,864,744],function(){return e(e.s=7964)}),_N_E=e.O()}]);