(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[376],{9376:function(e,t,s){Promise.resolve().then(s.bind(s,9033))},9033:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(7437),n=s(2265),l=s(4033),o=s(75),i=s(7739),r=s(4081),c=s(8653),d=s(9050),u=s(8874),h=s(9227),v=s(8938),x=s(819),p=s(1865),f=s(4363),m=s(7764),g=s(7),j=s(4647),b=s(2582),_=function(){let e=new Date,t=["Domingo","Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado"][e.getDay()],s=e.getDate(),a=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][e.getMonth()],n=e.getFullYear(),l=e.getHours(),o=e.getMinutes(),i=e.getSeconds(),r="".concat(t," ").concat(s," de ").concat(a," del ").concat(n," ").concat(l,":").concat(o,":").concat(i);return r},y=()=>{let e=(0,l.useRouter)(),[t,s]=(0,n.useState)(""),[y,w]=(0,n.useState)(["Daniel Noboa","Fernando Villavicencio","Luisa Gonzalez"]),[N,S]=(0,n.useState)({total_valid_votes:808,total_blank_votes:48,total_null_votes:48}),[Z,k]=(0,n.useState)({with_inconsistencies:0,valids:0,pending:4e3}),[P,E]=(0,n.useState)({total:904,total_number_of_absentees:132,total_voters:904}),[T,I]=(0,n.useState)([1,6,3]),[C,A]=(0,n.useState)(!1),[V,J]=(0,n.useState)("Lunes 16 de Octubre del 2023 15:45:04 ");(0,n.useEffect)(()=>{o.t.persist.rehydrate(),J(_())},[]);let{isLoggedIn:O,getTodasJuntas:q,juntasReceptoras:D,getVotesPerProvince:L,votesPerProvince:M,votesTotal:F,votersTotal:R,votesInfo:U}=(0,o.t)();(0,n.useEffect)(()=>{q(),M&&(z(),G())},[M]);let z=()=>{let e=[],t=[];M.forEach(s=>{e.push(s.candidate.name),t.push(s.votes.percentage)}),w(e),I(t)},G=()=>{S(F),E(R),k(U)};(0,n.useEffect)(()=>{O||e.push("/login")},[]);let{register:W,handleSubmit:B,formState:{errors:H}}=(0,p.cI)();return(0,a.jsxs)("section",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)("h2",{className:" bg-gray-200 p-5 w-full text-center font-semibold text-[23px]",children:"Presidente/a"}),(0,a.jsx)(v.Z,{component:"main",maxWidth:"xs",children:(0,a.jsx)(h.Z,{sx:{marginTop:2,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,a.jsxs)(h.Z,{component:"form",onSubmit:B(e=>{let t={province:e.provincia,quick_count:C?"true":"false"};return L(t),console.log(e),console.log(M),!0}),noValidate:!0,sx:{mt:3},children:[(0,a.jsx)(b.Z,{children:(0,a.jsx)(g.Z,{control:(0,a.jsx)(j.Z,{checked:C,onChange:e=>A(e.target.checked)}),label:"Conteo Rapido"})}),(0,a.jsx)(u.ZP,{container:!0,spacing:2,children:(0,a.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(r.Z,{fullWidth:!0,className:"w-[150px]",children:[(0,a.jsx)(x.Z,{id:"provincia-select-label",className:"w-[150px]",children:"Provincia"}),(0,a.jsxs)(c.Z,{labelId:"provincia",id:"provincia",value:t,label:"provincia",...W("provincia",{required:!0}),onChange:e=>{s(e.target.value)},className:"w-[150px]",children:[(0,a.jsx)(i.Z,{value:"Ecuador",children:"Ecuador"}),D.map(e=>(0,a.jsxs)(i.Z,{value:e.province,children:[e.province," "]},e.id))]}),H.provincia&&(0,a.jsx)("span",{className:"text-red-500",children:"This field is required"})]})})}),(0,a.jsx)(d.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},className:"bg-blue-500",children:"Buscar"})]})})}),(0,a.jsx)("div",{children:(0,a.jsxs)("ul",{className:"flex gap-4",children:[(0,a.jsxs)("li",{className:"p-2 border-2 border-solid flex flex-col items-center",children:[(0,a.jsx)("h4",{children:"Sufragantes"}),(0,a.jsx)("h6",{children:P.total})]}),(0,a.jsxs)("li",{className:"p-2 border-2 border-solid flex flex-col items-center",children:[(0,a.jsx)("h4",{children:"Ausentismo"}),(0,a.jsx)("h6",{children:P.total_number_of_absentees})]}),(0,a.jsxs)("li",{className:"p-2 border-2 border-solid flex flex-col items-center",children:[(0,a.jsx)("h4",{children:"Electores"}),(0,a.jsx)("h6",{children:P.total_voters})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-center items-center",children:[(0,a.jsx)("div",{children:(0,a.jsx)(f.u,{series:[{data:[{id:0,value:N.total_valid_votes,label:"Votos V\xe1lidos"},{id:1,value:N.total_blank_votes,label:"Votos Blancos"},{id:2,value:N.total_null_votes,label:"Votos Nulos"}]}],width:400,height:200,transformOrigin:"center center"})}),(0,a.jsx)("div",{children:(0,a.jsx)(f.u,{series:[{data:[{id:0,value:Z.with_inconsistencies,label:"Actas Pendientes"},{id:1,value:Z.valids,label:"Actas Novedad"},{id:2,value:Z.pending,label:"Actas V\xe1lidas"}]}],width:450,height:200,transformOrigin:"center center"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col mt-3 justify-center items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)("h2",{className:"text-[20px] font-bold leading-4",children:"Elecciones Generales - Presidente/a"}),(0,a.jsxs)("h6",{children:["Fecha Corte: ",V," "]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(m.v,{xAxis:[{scaleType:"band",data:y}],series:[{data:T}],width:1250,height:500})})]})]})}},75:function(e,t,s){"use strict";s.d(t,{t:function(){return d}});var a=s(4660),n=s(4810),l=s(9222);let o=e=>({candidates:[],getCandidates:async()=>{try{let t=await l.Z.get("http://54.89.73.83:5000/api/v1/candidates/election/1");e({candidates:t.data})}catch(e){console.error(e)}}}),i=e=>({currentUser:null,isLoggedIn:!1,role:null,login:async(t,s)=>{try{let a=await fetch("http://54.89.73.83:5000/api/v1/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:s})});if(!a.ok)return"Invalid email or password";{let t=await a.json();return e({isLoggedIn:!0}),e({currentUser:t}),e({role:t.role}),"Inicio de sessi\xf3n exitoso"}}catch(e){console.error(e)}},logout:()=>(e({isLoggedIn:!1}),e({currentUser:null}),e({role:null}),"Goodbye")}),r=e=>({juntasReceptoras:[],junta:null,getTodasJuntas:async()=>{try{let t=await l.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/");e({juntasReceptoras:t.data})}catch(e){console.error(e)}},getJunta:async t=>{try{let s=await l.Z.get("http://54.89.73.83:5000/api/v1/central_electorals/".concat(t));e({junta:s.data})}catch(e){console.error(e)}}}),c=e=>({votesPerProvince:null,votersTotal:null,votesTotal:null,votesInfo:null,postActa:async e=>{try{let t=await fetch("http://54.89.73.83:5000/api/v1/votes/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)return await t.json(),!0}catch(e){console.error(e)}},getVotesPerProvince:async t=>{console.log(t);let s="http://54.89.73.83:5000/api/v1/votes/?province=".concat(t.province,"&only_quick_count=").concat(t.quick_count);"Ecuador"===t.province&&(s="http://54.89.73.83:5000/api/v1/votes/?only_quick_count=".concat(t.quick_count));try{let t=await l.Z.get(s,{headers:{"Content-Type":"application/json"}});if(200===t.status){let s=await t.data;e({votesPerProvince:s.candidates_result}),e({votersTotal:s.voters_total}),e({votesTotal:s.votes_total}),e({votesInfo:s.votes_info}),console.log(await s),console.log(await s.votes_info)}else throw Error("Invalid email or password")}catch(e){console.error(e)}}}),d=(0,a.Ue)((0,n.tJ)(function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return{...i(...t),...o(...t),...r(...t),...c(...t)}},{name:"voting-system-store",storage:(0,n.FL)(()=>localStorage),skipHydration:!0}))}}]);